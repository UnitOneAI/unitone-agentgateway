# UnitOne AgentGateway - Default Azure Configuration
#
# This is the default configuration baked into the Docker image.
# Override by mounting a config file to /app/mounted-config/config.yaml
#
# For configuration reference, see: https://github.com/agentgateway/agentgateway

binds:
- port: 8080
  listeners:
  - hostname: "*"
    name: default
    protocol: http
    routes:
    # UI Dashboard
    - name: ui-route
      matches:
      - path:
          pathPrefix: /ui
      backends:
      - host: 127.0.0.1:15000

    # Admin API
    - name: admin-api-route
      matches:
      - path:
          pathPrefix: /config
      backends:
      - host: 127.0.0.1:15000

    # Default MCP route - configure your MCP servers here
    # or mount a custom config file to override
    - name: default-mcp
      matches:
      - path:
          pathPrefix: /mcp
      backends:
      - mcp:
          targets:
          - name: placeholder
            mcp:
              # Replace with your actual MCP server
              # This is a placeholder that will return an error
              host: http://localhost:9999/mcp
          statefulMode: stateful
      policies:
        cors:
          allowCredentials: false
          allowHeaders:
          - '*'
          allowMethods:
          - '*'
          allowOrigins:
          - '*'
          exposeHeaders:
          - mcp-session-id
        securityGuards:
          toolPoisoning:
            enabled: true
          rugPull:
            enabled: true
            scope: session
