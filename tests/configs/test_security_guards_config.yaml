# Security Guards Test Configuration
# Use with local test servers (see tests/docker/docker-compose.yaml)

binds:
  - port: 8080
    listeners:
      - routes:
          - backends:
              - mcp:
                  # Security guards configuration
                  securityGuards:
                    # PII Detection Guard
                    - id: pii-detector
                      enabled: true
                      priority: 50
                      failure_mode: fail_closed
                      timeout_ms: 100
                      runs_on:
                        - response
                      type: pii
                      pii_types:
                        - email_address
                        - phone_number
                        - social_security_number
                        - credit_card_number
                      confidence_threshold: 0.80
                      scan_fields:
                        - description
                        - input_schema
                      action: block

                  # MCP server targets (localhost for testing)
                  targets:
                    - name: pii-test-server
                      mcp:
                        host: http://localhost:8000/mcp
